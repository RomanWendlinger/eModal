(function(e){e(["jquery"],function(e,t){function o(e){x.modal(E).find(".modal-content").append(e)}function n(){var t,o;try{o=require("Q")}catch(e){o=window.Q}return o?t=o.defer():(t=e.Deferred(),t.promise=t.promise()),t.promise.element=l(!0).find(B),t}function r(t){if(t===!1)return k;var o=e(j).addClass("modal-footer").prop("id",O);if(t)for(var n=0,r=t.length;n<r;n++){var a=t[n],s=e("<button>").addClass("btn btn-"+(a.style||"primary"));for(var i in a)if(a.hasOwnProperty(i))switch(i){case"close":a[i]&&s.attr("data-dismiss","modal").addClass("x");break;case C:var d=a.click.bind(l(!0).find(".modal-content"));s.click(d);break;case"text":s.html(a[i]);break;default:s.attr(i,a[i])}o.append(s)}else o.append('<button class="x btn btn-primary" data-dismiss=modal type=button>Close</button>');return o}function a(t){var o,n=t.loading?D.loadingHtml:t.message||t;return n.on||n.onclick?(o=t.clone===!0?e(n).clone():e(n),o.addClass(t.useBin&&!t.loading?I:A)):o=e(j).attr("style","position:relative;word-wrap:break-word;").addClass(Q).html(n),t.css&&t.css!==o.css&&o.css(t.css),o}function l(t){function o(){return e('<div class="modal fade" tabindex="-1"><style>.modal-xl{width:96%;}.modal-body{max-height: calc(100vh - 145px);overflow-y: auto;}</style><div class=modal-dialog><div class=modal-content> <div class=modal-header><button type=button class="x close" data-dismiss=modal><span aria-hidden=true>&times;</span><span class=sr-only>Close</span></button><h4 class=modal-title></h4></div></div></div></div>').on("hidden.bs.modal",s).on(C,"button.x",function(t){var o=e(t.currentTarget);if(o.prop("type")!==L)return x.modal(z);try{if(o.closest("form")[0].checkValidity())return g()}catch(e){return g()}return x})}return x||(e("#"+w).length||e("body").append(e(j).prop("id",w).hide()),x=o()),t&&x?x:(D.autofocus&&x.on(H,function(){e(this).find(q).first().focus()}),x)}function s(){if(x){var e=x.find("."+I).removeClass(I).appendTo("#"+w);x.off(T).off(H).find(".modal-content > div:not(:first-child)").remove(),D.allowContentRecycle&&!M.clone||e.remove()}}function i(t,o){if(!t)throw new Error("Invalid parameters!");s(),M=t;var n=l();n.find(B).removeClass("modal-sm modal-lg modal-xl").addClass(t.size?"modal-"+t.size:D.size),n.find(".modal-title").html((t.title||o||D.title)+" ").append(e("<small>").html(t.subtitle||k)),n.on(T,t.onHide)}function d(e,t){F[e]=t}function c(t,o){function r(e){return x.find("."+Q).html(t.success?t.success(e):e),l.resolve(x)}function a(e,o){var n=t.error?t.error(e,o,s):'<div class="alert alert-danger"><strong>XHR Fail: </strong>URL [ '+s.url+"] load fail.</div>";return x.find("."+Q).html(n),l.reject(e)}var l=n();"object"==typeof t&&y(t);var s={async:!0,deferred:l,loading:!0,title:o||D.title,url:t.url||t,dataType:t.dataType||"text"};return t.url&&e.extend(s,t),e.ajax(s).done(r).fail(a),u(s,o)}function u(t,l){i(t,l);var s=t.deferred||n();"object"==typeof t&&y(t);var d=e(j).append(a(t),r(t.buttons));return o(d),t.async||x.on(H,s.resolve),s.promise}function f(t,o){function r(t){g();var o=e(t.currentTarget).html();return F[o]?a.resolve():a.reject()}var a=n();return"object"==typeof t&&y(t),u({async:!0,buttons:[{close:!0,click:r,text:F[t.label]?F[t.label]:F[D.confirmLabel],style:t.style&&t.style[0]||R},{close:!0,click:r,text:F[t.label]?t.label:D.confirmLabel,style:t.style&&t.style[1]}],deferred:a,message:t.message||t,onHide:r,size:t.size,title:t.title||o})}function m(t,o){function r(){return e(this).parent().find("div."+A).fadeOut(function(){e(this).remove()}),a.resolve()}var a=n();"object"==typeof data&&y(data);var l,s='<div class=modal-body style="position: absolute;width: 100%;background-color: rgba(255,255,255,0.8);height: 100%;">%1%</div><iframe class="embed-responsive-item" frameborder=0 src="%0%" style="width:100%;height:75vh;display:block;"/>'.replace("%0%",t.message||t.url||t).replace("%1%",D.loadingHtml);return l=jQuery.fn.jquery.split(".").map(function(e){return("0"+e).slice(-2)}).join(".")>"03.00.00"?e(s).on("load",r):e(s).load(r),u({async:!0,buttons:t.buttons||!1,deferred:a,message:l,size:t.size||K.xl,title:t.title||o})}function p(){return e("#"+w+" > *").remove()}function v(t,o){function a(e){var t=x.find(q).val();return g(),e.type!==L?l.reject(t):l.resolve(t),!1}var l=n();"object"==typeof t&&y(t);var s={deferred:l};if("object"==typeof t?e.extend(s,t):(s.message=t,s.title=o),s.async=!0,s.buttons)for(var i,d=0,c=s.buttons.length;d<c;d++)i=s.buttons[d],i.style=(i.style||"default")+" pull-left",i.type=i.type||"button";var f=r([{close:!0,type:"reset",text:F.OK,style:R},{close:!1,type:L,text:D.confirmLabel}].concat(s.buttons||[]));return s.buttons=!1,s.onHide=a,s.message=e('<form role=form style="margin-bottom:0;"><div class=modal-body><label for=prompt-input class=control-label>'+(s.message||k)+'</label><input type=text class=form-control required autocomplete="on" value="'+(s.value||k)+(s.pattern?'" pattern="'+s.pattern:k)+'"></div></form>').append(f).on(L,a),u(s)}function b(e){l(!0).find(B).prop("id",e)}function y(t){return e.extend(D,t)}function h(t){return x&&x.remove(),e.extend(E,t)}function g(){return x&&x.off(T).modal(z),x}var x,w="recycle-bin",j="<div>",k="",C="click",z="hide",H="shown.bs.modal",L="submit",O="eFooter",T=z+".bs.modal",q="input",R="danger",F={OK:"Cancel",True:"False",Yes:"No"},M={},Q="modal-body",B=".modal-dialog",E={},I="modal-rec",K={sm:"sm",lg:"lg",xl:"xl"},A="modal-tmp",D={allowContentRecycle:!0,confirmLabel:Object.keys(F)[0],labels:F,loadingHtml:'<h5>Loading...</h5><div class=progress><div class="progress-bar progress-bar-striped active" style="width: 100%"></div></div>',size:k,title:"Attention",autofocus:!1};return t.addLabel=d,t.ajax=c,t.alert=u,t.close=g,t.confirm=f,t.emptyBin=p,t.iframe=m,t.prompt=v,t.setId=b,t.setEModalOptions=y,t.setModalOptions=h,t.size=K,t.version="1.2.65",t})})("function"==typeof define&&define.amd?define:function(e,t){this.eModal="undefined"!=typeof module&&module.exports?t(require(e[0]),module.exports):t(window.$,{})});